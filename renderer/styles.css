/* ─── Reset ──────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:           #0d0d12;
  --sidebar-bg:   #13131a;
  --surface:      #1a1a24;
  --surface2:     #21212d;
  --surface3:     #272733;
  --border:       #282836;
  --border-light: #323244;
  --accent:       #7b68ee;
  --accent-dim:   rgba(123,104,238,.14);
  --accent-glow:  rgba(123,104,238,.30);
  --accent2:      #ff6b81;
  --success:      #43d98e;
  --success-dim:  rgba(67,217,142,.13);
  --warn:         #f59e0b;
  --text:         #dde1f0;
  --text-soft:    #a8adc4;
  --text-muted:   #5e6080;
  --radius:       8px;
  --radius-sm:    6px;
  --sidebar-w:    220px;
  --col-prio:     60px;
  --col-date:     94px;
  --col-actions:  84px;
}

html, body {
  height: 100%;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text);
  overflow: hidden;
  user-select: none;
  -webkit-font-smoothing: antialiased;
  font-size: 13px;
}

/* ─── Titlebar ───────────────────────────────────────── */
.titlebar {
  -webkit-app-region: drag;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 8px 0 12px;
  background: var(--sidebar-bg);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  position: relative;
  z-index: 10;
}
.titlebar-left {
  display: flex;
  align-items: center;
  gap: 8px;
}
.app-logo {
  width: 16px; height: 16px;
  color: var(--accent);
}
.titlebar-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text);
  letter-spacing: .02em;
}
.titlebar-controls {
  -webkit-app-region: no-drag;
  display: flex;
  gap: 4px;
}
.tb-btn {
  width: 26px; height: 26px;
  border: none; background: transparent; color: var(--text-muted);
  border-radius: 5px; cursor: pointer; font-size: 11px;
  display: flex; align-items: center; justify-content: center;
  transition: background .12s, color .12s;
}
.tb-btn:hover           { background: var(--surface3); color: var(--text); }
.tb-btn.close:hover     { background: var(--accent2);  color: #fff; }

/* ─── App shell ──────────────────────────────────────── */
.app {
  display: flex;
  height: calc(100vh - 36px);
  -webkit-app-region: no-drag;
}

/* ═══════════════════════════════════════════════════════
   SIDEBAR
═══════════════════════════════════════════════════════ */
.sidebar {
  width: var(--sidebar-w);
  flex-shrink: 0;
  background: var(--sidebar-bg);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  overflow-x: hidden;
}
.sidebar::-webkit-scrollbar { width: 3px; }
.sidebar::-webkit-scrollbar-thumb { background: var(--border); }

.sidebar-section {
  padding: 14px 10px 8px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.sidebar-label {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .1em;
  color: var(--text-muted);
  padding: 0 8px 6px;
}
.sidebar-divider {
  height: 1px;
  background: var(--border);
  margin: 6px 0;
}

/* Nav items */
.nav-item {
  display: flex;
  align-items: center;
  gap: 9px;
  padding: 7px 10px;
  border: none; background: transparent;
  color: var(--text-soft);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  transition: background .12s, color .12s;
  width: 100%;
  text-align: left;
}
.nav-item svg { width: 14px; height: 14px; flex-shrink: 0; opacity: .7; }
.nav-item:hover  { background: var(--surface2); color: var(--text); }
.nav-item.active { background: var(--accent-dim); color: var(--accent); font-weight: 700; }
.nav-item.active svg { opacity: 1; }
.nav-count {
  margin-left: auto;
  background: var(--surface3);
  color: var(--text-muted);
  font-size: 10px;
  font-weight: 700;
  padding: 1px 6px;
  border-radius: 999px;
  min-width: 18px;
  text-align: center;
}
.nav-item.active .nav-count { background: var(--accent-dim); color: var(--accent); }

/* ─── Pomodoro section in sidebar ───────────────────── */
.pomo-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding-bottom: 16px;
}

.mode-tabs {
  display: flex;
  gap: 3px;
  background: var(--surface2);
  padding: 3px;
  border-radius: var(--radius-sm);
  width: 100%;
}
.mode-tab {
  flex: 1;
  padding: 5px 0;
  border: none; background: transparent;
  color: var(--text-muted);
  border-radius: 4px; cursor: pointer;
  font-size: 11px; font-weight: 700;
  transition: all .15s;
}
.mode-tab.active { background: var(--accent); color: #fff; box-shadow: 0 0 8px var(--accent-glow); }

.timer-ring-wrapper {
  position: relative;
  width: 168px; height: 168px;
  display: flex; align-items: center; justify-content: center;
}
.timer-ring {
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  transform: rotate(-90deg);
}
.ring-bg       { fill: none; stroke: var(--surface3); stroke-width: 8; }
.ring-progress {
  fill: none;
  stroke: var(--accent);
  stroke-width: 8;
  stroke-linecap: round;
  stroke-dasharray: 515;
  stroke-dashoffset: 0;
  transition: stroke-dashoffset .5s linear, stroke .4s;
  filter: drop-shadow(0 0 5px var(--accent-glow));
}
.timer-display { display: flex; flex-direction: column; align-items: center; gap: 1px; z-index: 1; }
#timer-time {
  font-size: 36px;
  font-weight: 800;
  letter-spacing: -2px;
  font-variant-numeric: tabular-nums;
}
.timer-label {
  font-size: 9px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: .08em;
}

.timer-controls { display: flex; align-items: center; gap: 8px; }
.btn-primary {
  padding: 8px 20px;
  background: var(--accent);
  color: #fff; border: none; border-radius: 999px;
  font-size: 12px; font-weight: 700; cursor: pointer;
  box-shadow: 0 0 14px var(--accent-glow);
  transition: filter .12s, transform .1s;
}
.btn-primary:hover  { filter: brightness(1.1); }
.btn-primary:active { transform: scale(.96); }
.btn-icon {
  width: 30px; height: 30px;
  border: none; background: var(--surface2);
  color: var(--text-muted); border-radius: 50%;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: background .12s, color .12s;
}
.btn-icon svg { width: 13px; height: 13px; }
.btn-icon:hover { background: var(--surface3); color: var(--text); }

.session-row { display: flex; gap: 7px; }
.session-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--surface3);
  border: 2px solid var(--border-light);
  transition: all .25s;
}
.session-dot.active { background: var(--accent); border-color: var(--accent); box-shadow: 0 0 5px var(--accent-glow); }
.session-dot.done   { background: var(--success); border-color: var(--success); }
.session-text { font-size: 10px; color: var(--text-muted); }

.linked-label {
  font-size: 10px; font-weight: 700; text-transform: uppercase;
  letter-spacing: .08em; color: var(--text-muted);
  margin-bottom: 2px; width: 100%;
}
.linked-task-display {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 7px 10px;
  display: flex; align-items: center; justify-content: space-between;
  min-height: 34px;
}
#linked-task-name { font-size: 11px; color: var(--text-soft); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.unlink-btn { border: none; background: transparent; color: var(--text-muted); cursor: pointer; font-size: 11px; flex-shrink: 0; padding-left: 6px; }
.unlink-btn:hover { color: var(--accent2); }

/* ═══════════════════════════════════════════════════════
   MAIN CONTENT
═══════════════════════════════════════════════════════ */
.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-width: 0;
  background: var(--bg);
}

/* Top bar */
.main-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 20px 12px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  gap: 12px;
}
.topbar-left {
  display: flex;
  align-items: baseline;
  gap: 10px;
  min-width: 0;
}
.view-title {
  font-size: 20px;
  font-weight: 800;
  color: var(--text);
  letter-spacing: -.4px;
  white-space: nowrap;
}
.view-date {
  font-size: 11px;
  color: var(--text-muted);
  white-space: nowrap;
}
.topbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}
.topbar-search {
  display: flex;
  align-items: center;
  gap: 6px;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 5px 10px;
  transition: border-color .15s;
}
.topbar-search:focus-within { border-color: var(--accent); }
.topbar-search svg { width: 13px; height: 13px; color: var(--text-muted); flex-shrink: 0; }
.search-input {
  background: transparent;
  border: none;
  outline: none;
  color: var(--text);
  font-size: 12px;
  width: 140px;
  -webkit-app-region: no-drag;
  pointer-events: all;
}
.search-input::placeholder { color: var(--text-muted); }
.btn-new-task {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 6px 14px;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  -webkit-app-region: no-drag;
  pointer-events: all;
  white-space: nowrap;
  transition: filter .12s;
  box-shadow: 0 0 12px var(--accent-glow);
}
.btn-new-task:hover  { filter: brightness(1.1); }
.btn-new-task svg { width: 12px; height: 12px; }
.clear-btn {
  background: transparent; border: none;
  color: var(--text-muted); font-size: 11px; cursor: pointer;
  padding: 4px 8px; border-radius: var(--radius-sm);
  -webkit-app-region: no-drag; pointer-events: all;
  transition: color .12s, background .12s;
  white-space: nowrap;
}
.clear-btn:hover { color: var(--accent2); background: rgba(255,107,129,.08); }

/* ─── Task table ─────────────────────────────────────── */
.task-table {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
}
.task-table::-webkit-scrollbar { width: 5px; }
.task-table::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

/* Column definitions (shared by header, add-row, task-item) */
.col-headers, .add-task-row, .task-item {
  display: grid;
  grid-template-columns:
    var(--col-prio)
    1fr
    var(--col-date)
    var(--col-actions);
  align-items: center;
}

/* Column headers row */
.col-headers {
  padding: 0 0 0 0;
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  background: var(--bg);
  z-index: 2;
}
.col-headers > div {
  padding: 7px 10px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .07em;
  color: var(--text-muted);
}
.col-h-prio { justify-self: center; }

/* Add task row */
.add-task-row {
  padding: 4px 0;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
  transition: background .12s;
  gap: 0;
}
.add-task-row:focus-within {
  background: var(--surface2);
  box-shadow: inset 0 -2px 0 var(--accent);
}
.add-task-plus {
  width: 14px; height: 14px;
  color: var(--accent); justify-self: center;
}
.task-input {
  width: 100%;
  padding: 7px 8px;
  background: transparent;
  border: none;
  color: var(--text);
  font-size: 13px;
  outline: none;
  -webkit-app-region: no-drag;
  pointer-events: all;
}
.task-input::placeholder { color: var(--text-muted); }
.priority-select {
  background: transparent;
  border: 1px solid transparent;
  color: var(--text-soft);
  font-size: 11px;
  padding: 3px 4px;
  border-radius: var(--radius-sm);
  outline: none;
  cursor: pointer;
  width: 100%;
  -webkit-app-region: no-drag;
  pointer-events: all;
  transition: border-color .12s, background .12s;
}
.priority-select:focus, .priority-select:hover {
  border-color: var(--border-light);
  background: var(--surface3);
}
.btn-add {
  padding: 4px 12px;
  background: var(--accent);
  color: #fff; border: none; border-radius: var(--radius-sm);
  font-size: 11px; font-weight: 700; cursor: pointer;
  -webkit-app-region: no-drag;
  pointer-events: all;
  transition: filter .12s;
  justify-self: center;
  margin: 0 auto;
}
.btn-add:hover  { filter: brightness(1.1); }
.btn-add:active { transform: scale(.96); }

/* Add-row priority cell */
.add-prio-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 4px;
}

/* ─── Task rows ──────────────────────────────────────── */
.task-list { list-style: none; }

.task-item {
  padding: 0;
  border-bottom: 1px solid var(--border);
  min-height: 38px;
  transition: background .1s;
  animation: rowIn .18s ease;
  cursor: default;
}
@keyframes rowIn {
  from { opacity: 0; transform: translateY(-3px); }
  to   { opacity: 1; transform: translateY(0); }
}
.task-item:hover { background: var(--surface); }
.task-item.done  { opacity: .5; }
.task-item.linked-active { background: var(--accent-dim); }

/* Col 1 — priority pill cell */
.task-prio-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 4px;
  height: 100%;
}
.prio-pill {
  font-size: 9px;
  font-weight: 800;
  letter-spacing: .04em;
  text-transform: uppercase;
  padding: 2px 6px;
  border-radius: 3px;
  white-space: nowrap;
}
.prio-pill.urgent { background: rgba(255,107,129,.22); color: #ff6b81; }
.prio-pill.high   { background: rgba(251,146,60,.22);  color: #fb923c; }
.prio-pill.med    { background: rgba(250,204,21,.18);  color: #c89f00; }
.prio-pill.low    { background: rgba(94,96,128,.18);   color: var(--text-muted); }

/* Col 2 — name cell */
.task-name-cell {
  display: flex;
  align-items: center;
  gap: 6px;
  overflow: hidden;
  min-width: 0;
  padding: 0 6px 0 0;
}

/* Status icon (circle/check) inline in name cell */
.task-status-icon {
  width: 15px; height: 15px;
  flex-shrink: 0;
  cursor: pointer;
  transition: opacity .12s;
}
.task-status-icon:hover { opacity: .7; }
/* Status color variants for inline task icon */
.task-status-icon.todo   { color: var(--text-muted); }
.task-status-icon.inprog { color: var(--accent); }
.task-status-icon.inprog path { fill: var(--accent); stroke: none; }
.task-status-icon.done   { color: var(--success); }

.task-text {
  font-size: 13px;
  color: var(--text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex-shrink: 1;
  min-width: 30px;
}
.task-item.done .task-text { text-decoration: line-through; color: var(--text-muted); }

/* Col 3 — date */
.task-date { font-size: 11px; color: var(--text-muted); padding: 0 6px; }

/* Col 4 — actions */
.task-actions {
  display: flex; gap: 1px; justify-content: center;
  opacity: 0; transition: opacity .12s;
  padding: 0 4px;
}
.task-item:hover .task-actions { opacity: 1; }
.task-action-btn {
  width: 24px; height: 24px;
  border: none; background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all .12s;
  -webkit-app-region: no-drag; pointer-events: all;
}
.task-action-btn svg { width: 12px; height: 12px; }
.task-action-btn:hover { background: var(--surface3); }
.task-action-btn.link-btn:hover   { color: var(--accent); }
.task-action-btn.link-btn.active  { color: var(--accent); background: var(--accent-dim); }
.task-action-btn.delete-btn:hover { color: var(--accent2); background: rgba(255,107,129,.1); }

/* Empty state */
.empty-row td,
.empty-state {
  text-align: center;
  padding: 48px 0;
  color: var(--text-muted);
  font-size: 13px;
  grid-column: 1 / -1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}
.empty-state svg { width: 44px; height: 44px; opacity: .2; }

/* ─── Break mode ─────────────────────────────────────── */
body.break-mode .ring-progress  { stroke: var(--success); filter: drop-shadow(0 0 5px rgba(67,217,142,.4)); }
body.break-mode .btn-primary    { background: var(--success); box-shadow: 0 0 14px rgba(67,217,142,.35); }
body.break-mode .mode-tab.active { background: var(--success); box-shadow: 0 0 8px rgba(67,217,142,.35); }

/* ─── Tag pills (pipe style) ───────────────────────────── */
.task-tags {
  display: flex;
  align-items: center;
  gap: 1px;
  flex-shrink: 0;
  flex-wrap: nowrap;
  overflow: hidden;
}
.tag-pill {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
  flex-shrink: 0;
  color: var(--text-muted);
  padding: 0 3px;
}
.tag-pipe {
  opacity: .4;
  font-weight: 300;
  margin-right: 1px;
  pointer-events: none;
}
.tag-name { color: var(--text-soft); }
/* per-tag color classes */
.tag-c0 .tag-name { color: #a99df7; }
.tag-c1 .tag-name { color: #2dd4bf; }
.tag-c2 .tag-name { color: #fb923c; }
.tag-c3 .tag-name { color: #f472b6; }
.tag-c4 .tag-name { color: #c89f00; }
.tag-c5 .tag-name { color: #4ade80; }
.tag-c6 .tag-name { color: #60a5fa; }
.tag-c7 .tag-name { color: #f87171; }
.tag-remove {
  border: none; background: transparent; cursor: pointer;
  font-size: 10px; line-height: 1; padding: 0 1px;
  opacity: 0; color: var(--text-muted);
  transition: opacity .1s;
  -webkit-app-region: no-drag; pointer-events: all;
}
.tag-pill:hover .tag-remove { opacity: 1; }
.tag-remove:hover { color: var(--accent2); }

/* Tag form pills (in add-row) */
.tag-pill-form {
  display: inline-flex; align-items: center; gap: 2px;
  font-size: 10px; font-weight: 600;
  padding: 2px 6px; border-radius: 3px;
  white-space: nowrap; flex-shrink: 0;
}
.tag-pill-form.tag-c0 { background: rgba(123,104,238,.18); color: #a99df7; }
.tag-pill-form.tag-c1 { background: rgba(45,212,191,.15);  color: #2dd4bf; }
.tag-pill-form.tag-c2 { background: rgba(251,146,60,.15);  color: #fb923c; }
.tag-pill-form.tag-c3 { background: rgba(244,114,182,.15); color: #f472b6; }
.tag-pill-form.tag-c4 { background: rgba(250,204,21,.15);  color: #c89f00; }
.tag-pill-form.tag-c5 { background: rgba(74,222,128,.15);  color: #4ade80; }
.tag-pill-form.tag-c6 { background: rgba(96,165,250,.15);  color: #60a5fa; }
.tag-pill-form.tag-c7 { background: rgba(248,113,113,.15); color: #f87171; }

/* Add-tag inline button */
.add-tag-btn {
  border: none; background: transparent;
  color: var(--text-muted);
  font-size: 10px; font-weight: 600;
  padding: 2px 5px;
  border-radius: 3px;
  cursor: pointer;
  opacity: 0;
  white-space: nowrap;
  flex-shrink: 0;
  transition: opacity .12s, background .12s, color .12s;
  pointer-events: all;
  -webkit-app-region: no-drag;
}
.task-item:hover .add-tag-btn { opacity: 1; }
.add-tag-btn:hover { background: var(--surface3); color: var(--accent); }

/* Tag input (add-form + inline) */
.tag-input-wrap {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  flex-wrap: wrap;
}
.tag-quick-input {
  background: transparent;
  border: none;
  color: var(--text-soft);
  font-size: 11px;
  width: 72px;
  outline: none;
  padding: 2px 2px;
  -webkit-app-region: no-drag;
  pointer-events: all;
}
.tag-quick-input::placeholder { color: var(--text-muted); opacity: .6; }

/* ─── Status groups ──────────────────────────────────── */
.status-group {
  list-style: none;
  border-left: 3px solid transparent;
}
.status-group[data-status="todo"]   { border-left-color: var(--text-muted); }
.status-group[data-status="inprog"] { border-left-color: var(--accent); }
.status-group[data-status="done"]   { border-left-color: var(--success); }

.group-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px 7px 8px;
  cursor: pointer;
  border-bottom: 1px solid var(--border);
  background: var(--bg);
  user-select: none;
  transition: background .12s;
  position: sticky;
  top: 33px;
  z-index: 1;
}
.group-header:hover { background: var(--surface); }

.group-chevron {
  width: 12px; height: 12px;
  color: var(--text-muted);
  flex-shrink: 0;
  transition: transform .18s;
}
.status-group.collapsed .group-chevron { transform: rotate(-90deg); }
.status-group.collapsed .group-tasks   { display: none; }

.group-status-icon {
  width: 16px; height: 16px;
  flex-shrink: 0;
}
.group-status-icon.todo path,
.group-status-icon.todo rect   { stroke: var(--text-muted); }
.group-status-icon.inprog path,
.group-status-icon.inprog circle { stroke: var(--accent); fill: none; }
.group-status-icon.inprog .fill-part { fill: var(--accent); stroke: none; }
.group-status-icon.done path,
.group-status-icon.done circle { stroke: var(--success); fill: none; }
.group-status-icon.done polyline { stroke: var(--success); }

.group-name {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-soft);
}
.group-count {
  font-size: 10px;
  font-weight: 700;
  color: var(--text-muted);
  background: var(--surface2);
  padding: 1px 6px;
  border-radius: 999px;
  margin-left: 2px;
}

.group-tasks { list-style: none; }

/* ═══════════════════════════════════════════════════════
   DRAG AND DROP
═══════════════════════════════════════════════════════ */
.task-item[draggable="true"] { cursor: grab; }
.task-item[draggable="true"]:active { cursor: grabbing; }
.task-item.dragging { opacity: 0.35; pointer-events: none; }
.task-item.drag-over {
  border-top: 2px solid var(--accent);
  margin-top: -2px;
}

/* ═══════════════════════════════════════════════════════
   LIGHT MODE
═══════════════════════════════════════════════════════ */
body.light {
  --bg:           #f3f3f8;
  --sidebar-bg:   #eaeaf2;
  --surface:      #ffffff;
  --surface2:     #ededf5;
  --surface3:     #e4e4ef;
  --border:       #d0d0e0;
  --border-light: #c0c0d4;
  --text:         #1c1c30;
  --text-soft:    #4a4a6a;
  --text-muted:   #8888aa;
}
body.light .titlebar,
body.light .sidebar { background: var(--sidebar-bg); }
body.light .main-content { background: var(--bg); }
body.light .task-table { background: var(--surface); }
body.light .add-task-row,
body.light .col-headers { background: var(--surface); }
body.light .task-item:hover { background: var(--surface2); }
body.light .search-input { background: var(--surface2); }
body.light .topbar-search { background: var(--surface2); }

/* ═══════════════════════════════════════════════════════
   ADD OPTIONS BAR
═══════════════════════════════════════════════════════ */
.add-options-bar {
  display: flex;
  align-items: center;
  gap: 18px;
  padding: 5px 12px 7px 68px;
  background: var(--surface);
  border-bottom: 2px solid var(--border);
}
.add-opt {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 11px;
  color: var(--text-muted);
  cursor: pointer;
  white-space: nowrap;
}
.add-opt svg { width: 11px; height: 11px; flex-shrink: 0; }
.opt-input {
  background: var(--surface2);
  border: 1px solid var(--border-light);
  border-radius: 4px;
  color: var(--text);
  font-size: 11px;
  padding: 2px 6px;
  outline: none;
  cursor: pointer;
  -webkit-app-region: no-drag;
  pointer-events: all;
  font-family: inherit;
}
.opt-input:focus { border-color: var(--accent); }
.opt-input[type="date"] { width: 118px; color-scheme: dark; }
.opt-input[type="number"] { width: 42px; text-align: center; }
.opt-hint { font-size: 10px; color: var(--text-muted); opacity: .7; }
body.light .opt-input[type="date"] { color-scheme: light; }
body.light .opt-input { background: var(--surface3); }

/* ═══════════════════════════════════════════════════════
   SUBTASKS
═══════════════════════════════════════════════════════ */
.subtask-area {
  grid-column: 1 / -1;
  padding: 4px 12px 8px 46px;
  align-self: start;
  border-bottom: 1px solid var(--border);
  background: var(--bg);
}
.subtask-list { list-style: none; display: flex; flex-direction: column; gap: 1px; }
.subtask-item {
  display: flex;
  align-items: center;
  gap: 7px;
  padding: 3px 6px;
  border-radius: 4px;
  transition: background .1s;
}
.subtask-item:hover { background: var(--surface2); }
.subtask-item.done .subtask-text { text-decoration: line-through; color: var(--text-muted); }
.subtask-check {
  width: 13px; height: 13px;
  accent-color: var(--accent);
  cursor: pointer;
  flex-shrink: 0;
  -webkit-app-region: no-drag;
  pointer-events: all;
}
.subtask-text { font-size: 12px; color: var(--text-soft); flex: 1; min-width: 0; }
.subtask-del {
  border: none; background: transparent;
  color: var(--text-muted); font-size: 14px;
  cursor: pointer; opacity: 0; padding: 0 3px;
  line-height: 1; transition: opacity .1s;
  pointer-events: all; -webkit-app-region: no-drag;
  flex-shrink: 0;
}
.subtask-item:hover .subtask-del { opacity: .6; }
.subtask-del:hover { color: var(--accent2); opacity: 1 !important; }
.subtask-new-input {
  width: 100%; background: transparent; border: none;
  color: var(--text); font-size: 12px; padding: 3px 6px;
  outline: none; -webkit-app-region: no-drag; pointer-events: all;
  font-family: inherit;
}
.subtask-new-input::placeholder { color: var(--text-muted); opacity: .5; }
.subtask-add-row { padding: 1px 0; }
.subtask-badge {
  font-size: 9px; font-weight: 700;
  color: var(--text-muted);
  background: var(--surface2);
  padding: 1px 5px; border-radius: 999px;
  flex-shrink: 0;
  cursor: pointer;
  -webkit-app-region: no-drag; pointer-events: all;
  transition: background .1s, color .1s;
}
.subtask-badge:hover { background: var(--accent-dim); color: var(--accent); }
.subtask-toggle {
  display: inline-flex; align-items: center; justify-content: center;
  cursor: pointer; color: var(--text-muted);
  width: 14px; height: 14px;
  flex-shrink: 0;
  transition: transform .15s;
  -webkit-app-region: no-drag; pointer-events: all;
  opacity: 0;
}
.task-item:hover .subtask-toggle { opacity: 1; }
.subtask-toggle.expanded { transform: rotate(0deg); }
.subtask-toggle:not(.expanded) { transform: rotate(-90deg); }

/* ═══════════════════════════════════════════════════════
   TASK NOTES
═══════════════════════════════════════════════════════ */
.note-area {
  grid-column: 1 / -1;
  padding: 6px 12px 10px 46px;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
}
.note-textarea {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-size: 12px;
  font-family: inherit;
  padding: 7px 10px;
  resize: vertical;
  outline: none;
  min-height: 56px;
  box-sizing: border-box;
  -webkit-app-region: no-drag;
  pointer-events: all;
  transition: border-color .15s;
  line-height: 1.5;
}
.note-textarea::placeholder { color: var(--text-muted); opacity: .5; }
.note-textarea:focus { border-color: var(--accent); }
.note-btn.active { color: var(--accent); }
.note-indicator {
  display: inline-flex; align-items: center;
  color: var(--text-muted);
  flex-shrink: 0;
  cursor: pointer;
  opacity: .6;
  -webkit-app-region: no-drag; pointer-events: all;
  transition: opacity .1s, color .1s;
}
.note-indicator:hover { opacity: 1; color: var(--accent); }

/* ═══════════════════════════════════════════════════════
   POMODORO DOTS
═══════════════════════════════════════════════════════ */
.pomo-dots {
  display: inline-flex; align-items: center; gap: 2px;
  flex-shrink: 0;
}
.pomo-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: transparent;
  border: 1.5px solid var(--text-muted);
  flex-shrink: 0;
  opacity: .45;
}
.pomo-dot.done {
  background: var(--accent2);
  border-color: var(--accent2);
  opacity: 1;
}

/* ═══════════════════════════════════════════════════════
   DUE DATES
═══════════════════════════════════════════════════════ */
.task-date.due-soon  { color: var(--warn); font-weight: 600; }
.task-date.due-overdue { color: var(--accent2); font-weight: 700; }

/* ═══════════════════════════════════════════════════════
   RECUR BADGE
═══════════════════════════════════════════════════════ */
.recur-badge {
  display: inline-flex; align-items: center;
  color: var(--accent); opacity: .65;
  flex-shrink: 0;
}

/* ═══════════════════════════════════════════════════════
   SPLASH / FORSIDE
═══════════════════════════════════════════════════════ */
.splash {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: #07070e;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: splashIn .35s ease both;
  -webkit-app-region: drag;
  overflow: hidden;
}

@keyframes splashIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* Dismiss animation */
.splash.splash-out {
  animation: splashOut .5s cubic-bezier(.4,0,.2,1) forwards;
  pointer-events: none;
}
@keyframes splashOut {
  to { opacity: 0; transform: translateY(-24px) scale(1.02); }
}

/* Ambient glows */
.splash-orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(100px);
  pointer-events: none;
}
.splash-orb.o1 {
  width: 560px; height: 560px;
  background: rgba(123,104,238,.22);
  top: -160px; right: -120px;
}
.splash-orb.o2 {
  width: 400px; height: 400px;
  background: rgba(255,107,129,.12);
  bottom: -120px; left: -80px;
}
.splash-orb.o3 {
  width: 300px; height: 300px;
  background: rgba(67,217,142,.07);
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
}

/* Content container */
.splash-body {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 0;
  max-width: 520px;
  width: 100%;
  padding: 0 40px;
  -webkit-app-region: no-drag;
  animation: splashBodyIn .5s .1s cubic-bezier(.22,1,.36,1) both;
}
@keyframes splashBodyIn {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* Brand row */
.splash-brand {
  display: flex;
  align-items: center;
  gap: 11px;
  margin-bottom: 36px;
}
.splash-logomark {
  width: 48px; height: 48px;
  background: var(--accent);
  border-radius: 13px;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 0 36px rgba(123,104,238,.55);
}
.splash-logomark svg { width: 24px; height: 24px; color: #fff; }
.splash-brand-name {
  font-size: 26px;
  font-weight: 900;
  color: #fff;
  letter-spacing: -.5px;
}

/* Headline */
.splash-headline {
  font-size: 52px;
  font-weight: 900;
  line-height: 1.08;
  letter-spacing: -2px;
  color: #fff;
  margin-bottom: 18px;
}
.splash-headline span { color: var(--accent); }

/* Sub-text */
.splash-tagline {
  font-size: 15px;
  color: rgba(221,225,240,.5);
  line-height: 1.65;
  max-width: 420px;
  margin-bottom: 28px;
}

/* Date / greeting hint */
.splash-hint {
  font-size: 11px;
  color: rgba(221,225,240,.28);
  letter-spacing: .03em;
  margin-top: 14px;
}

/* Feature chips */
.splash-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
  margin-bottom: 36px;
}
.splash-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: rgba(255,255,255,.055);
  border: 1px solid rgba(255,255,255,.1);
  border-radius: 999px;
  padding: 7px 14px;
  font-size: 12px;
  font-weight: 500;
  color: rgba(221,225,240,.75);
  transition: background .15s, border-color .15s;
}
.splash-chip svg { color: var(--accent); flex-shrink: 0; }
.splash-chip:hover { background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.18); }

/* Stats (shown when tasks exist) */
.splash-stats {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-bottom: 32px;
  flex-wrap: wrap;
}
.sp-stat {
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.09);
  border-radius: 10px;
  padding: 12px 20px;
  min-width: 80px;
  text-align: center;
}
.sp-n {
  display: block;
  font-size: 26px;
  font-weight: 800;
  color: var(--accent);
  line-height: 1;
}
.sp-l {
  display: block;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .09em;
  color: rgba(221,225,240,.35);
  margin-top: 5px;
}
.sp-stat.sp-overdue .sp-n { color: var(--accent2); }

/* CTA button */
.splash-cta {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 15px 36px;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 999px;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
  font-family: inherit;
  box-shadow: 0 0 44px rgba(123,104,238,.5);
  transition: transform .15s, filter .15s, box-shadow .15s;
  animation: ctaPulse 2.5s 1s ease-in-out infinite;
}
@keyframes ctaPulse {
  0%, 100% { box-shadow: 0 0 44px rgba(123,104,238,.5); }
  50%       { box-shadow: 0 0 64px rgba(123,104,238,.7); }
}
.splash-cta:hover  { transform: translateY(-2px); filter: brightness(1.12); animation: none; }
.splash-cta:active { transform: scale(.97); }

/* ── Auth steps (signup & login) ─────────────────────────────── */
.splash-auth {
  display: none;
  flex-direction: column;
  gap: 12px;
  width: 100%;
  max-width: 380px;
  animation: splashBodyIn .32s ease both;
}

/* Show correct auth panel, hide landing content */
.splash.splash-step-signup .splash-tagline,
.splash.splash-step-signup .splash-chips,
.splash.splash-step-signup .splash-stats,
.splash.splash-step-signup #splash-enter,
.splash.splash-step-signup .splash-onboard   { display: none !important; }
.splash.splash-step-signup #splash-signup    { display: flex; }

.splash.splash-step-login .splash-tagline,
.splash.splash-step-login .splash-chips,
.splash.splash-step-login .splash-stats,
.splash.splash-step-login #splash-enter,
.splash.splash-step-login .splash-onboard    { display: none !important; }
.splash.splash-step-login #splash-login      { display: flex; }

.splash-auth-title {
  font-size: 13px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .08em;
  color: rgba(255,255,255,.4);
  margin: 0 0 2px;
}

/* Re-use .splash-onboard-input styles — inputs already styled */
.splash-auth-error {
  font-size: 12px;
  color: #ff6b81;
  min-height: 16px;
  margin: 0;
  opacity: 0;
  transform: translateY(-4px);
  transition: opacity .2s, transform .2s;
}
.splash-auth-error.visible {
  opacity: 1;
  transform: translateY(0);
}

/* ── Onboarding step (no tasks yet) ──────────────────────────── */
.splash-onboard {
  display: none;
  flex-direction: column;
  gap: 14px;
  width: 100%;
  max-width: 460px;
  animation: splashBodyIn .32s ease both;
}
.splash.splash-onboarding .splash-chips,
.splash.splash-onboarding .splash-stats,
.splash.splash-onboarding .splash-tagline,
.splash.splash-onboarding #splash-enter { display: none !important; }
.splash.splash-onboarding .splash-onboard { display: flex; }

.splash-onboard-label {
  font-size: 15px;
  color: rgba(255,255,255,.62);
  margin: 0;
}
.splash-onboard-row {
  display: flex;
  gap: 10px;
  align-items: stretch;
}
.splash-onboard-input {
  flex: 1;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.13);
  border-radius: 12px;
  padding: 13px 16px;
  color: #fff;
  font-size: 15px;
  font-family: inherit;
  outline: none;
  transition: border-color .15s, box-shadow .15s;
}
.splash-onboard-input::placeholder { color: rgba(255,255,255,.28); }
.splash-onboard-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-glow);
}
.splash-cta-sm {
  padding: 13px 20px;
  font-size: 14px;
  animation: none;
  white-space: nowrap;
  flex-shrink: 0;
}
.splash-onboard-skip {
  font-size: 12px;
  color: rgba(255,255,255,.3);
  margin: 0;
}
.splash-skip-link {
  background: none;
  border: none;
  color: rgba(255,255,255,.42);
  font-size: 12px;
  font-family: inherit;
  cursor: pointer;
  padding: 0;
  text-decoration: underline;
  text-underline-offset: 2px;
}
.splash-skip-link:hover { color: rgba(255,255,255,.68); }

/* ── Sidebar bottom (account button) ─────────────────────────── */
.sidebar-bottom {
  margin-top: auto;
  padding: 0 0 8px;
}
.nav-account {
  gap: 10px;
}
.nav-avatar {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: var(--accent);
  color: #fff;
  font-size: 11px;
  font-weight: 800;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  letter-spacing: .02em;
}

/* ── Account page — full-screen standalone ────────────────────── */
.account-page {
  position: fixed;
  inset: 0;
  top: 36px;                         /* sit below the custom title bar */
  z-index: 500;
  background: var(--bg);
  display: flex;
  flex-direction: column;
  animation: accountIn .22s ease both;
}
.account-page.hidden { display: none; }

@keyframes accountIn {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* Top bar */
.account-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 28px;
  height: 52px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  background: var(--surface);
}
.account-topbar-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-soft);
  letter-spacing: .03em;
}
.account-back {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 13px;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
  padding: 6px 10px 6px 6px;
  border-radius: var(--radius-sm);
  transition: background .12s, color .12s;
}
.account-back:hover { background: var(--surface2); color: var(--text); }

/* Scrollable body */
.account-body {
  flex: 1;
  overflow-y: auto;
  padding: 44px 60px 64px;
  display: flex;
  flex-direction: column;
  gap: 36px;
  max-width: 860px;
  width: 100%;
  margin: 0 auto;
}

/* Hero header */
.account-hero {
  display: flex;
  align-items: center;
  gap: 24px;
}

.account-avatar {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  background: var(--accent);
  color: #fff;
  font-size: 26px;
  font-weight: 900;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  letter-spacing: .02em;
  box-shadow: 0 4px 24px var(--accent-glow);
}
.account-name {
  font-size: 28px;
  font-weight: 800;
  color: var(--text);
  letter-spacing: -.025em;
  margin: 0 0 5px;
}
.account-since {
  font-size: 12px;
  color: var(--text-muted);
  margin: 0;
}

/* Cards grid */
.account-cards {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
.account-card-stats {
  grid-column: 1 / -1;
}
.account-card-full {
  grid-column: 1 / -1;
}

/* ── Appearance settings ─────────────────────────────────────── */
.appear-row   { display:flex; align-items:center; gap:20px; margin-top:14px; }
.appear-label { font-size:12px; color:var(--text-muted); min-width:100px; }

.accent-swatches { display:flex; gap:10px; }
.swatch {
  width:28px; height:28px; border-radius:50%;
  background: var(--sw);
  border: 3px solid transparent;
  cursor:pointer;
  transition: transform .15s, border-color .15s, box-shadow .15s;
  outline: none;
}
.swatch:hover { transform:scale(1.18); }
.swatch.active {
  border-color: #fff;
  box-shadow: 0 0 0 2px var(--sw);
}

.theme-btns { display:flex; gap:8px; }
.theme-opt {
  display:inline-flex; align-items:center; gap:6px;
  padding:8px 18px;
  border-radius:var(--radius-sm);
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text-muted);
  font-size:12px; font-weight:600; font-family:inherit;
  cursor:pointer;
  transition: background .15s, border-color .15s, color .15s;
}
.theme-opt:hover { border-color:var(--border-light); color:var(--text); }
.theme-opt.active {
  background: var(--accent-dim);
  border-color: var(--accent);
  color: var(--accent);
}

.account-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px 26px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  transition: border-color .15s;
}
.account-card:hover { border-color: var(--border-light); }
.account-card-title {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .09em;
  color: var(--text-muted);
  margin: 0;
}
.account-fields {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.account-input {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 10px 13px;
  color: var(--text);
  font-size: 13px;
  font-family: inherit;
  outline: none;
  box-sizing: border-box;
  transition: border-color .15s, box-shadow .15s;
}
.account-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-glow);
}
.account-field-row {
  display: flex;
  gap: 8px;
  align-items: center;
}
.account-field-row .account-input { flex: 1; }
.account-save-btn {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: var(--radius-sm);
  padding: 10px 18px;
  font-size: 12px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  white-space: nowrap;
  transition: opacity .15s, transform .1s;
}
.account-save-btn:hover  { opacity: .88; transform: translateY(-1px); }
.account-save-btn:active { transform: scale(.97); }

.account-feedback {
  font-size: 12px;
  min-height: 16px;
  margin: 0;
  opacity: 0;
  transform: translateY(-4px);
  transition: opacity .2s, transform .2s;
}
.account-feedback.visible { opacity: 1; transform: translateY(0); }

/* Stats grid */
.account-stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 16px;
}
.acc-stat {
  display: flex;
  flex-direction: column;
  gap: 5px;
}
.acc-stat-n {
  font-size: 34px;
  font-weight: 800;
  color: var(--text);
  line-height: 1;
  font-variant-numeric: tabular-nums;
}
.acc-stat-l {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: .07em;
}
.acc-stat-warn   .acc-stat-n { color: var(--warn); }
.acc-stat-accent .acc-stat-n { color: var(--accent); }

/* Danger zone */
.account-danger {
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.account-signout {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(255,107,129,.1);
  border: 1px solid rgba(255,107,129,.25);
  color: #ff6b81;
  border-radius: var(--radius-sm);
  padding: 10px 18px;
  font-size: 13px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  align-self: flex-start;
  transition: background .15s, border-color .15s, transform .1s;
}
.account-signout:hover  { background: rgba(255,107,129,.18); border-color: rgba(255,107,129,.45); transform: translateY(-1px); }
.account-signout:active { transform: scale(.97); }

/* ══════════════════════════════════════════════════════════════
   SIDEBAR — My Boards
══════════════════════════════════════════════════════════════ */
.sidebar-label-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-right: 4px;
}
.sidebar-add-board {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border-radius: 6px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  transition: background .15s, color .15s;
}
.sidebar-add-board:hover { background: var(--surface2); color: var(--text); }

.sidebar-board-list { list-style: none; padding: 0; margin: 0; }
.board-nav-item { display: flex; align-items: center; gap: 8px; }
.board-emoji    { font-size: 14px; flex-shrink: 0; }
.board-nav-name { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.board-inline-input {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--accent);
  border-radius: var(--radius-sm);
  color: var(--text);
  font-size: 12px;
  font-family: inherit;
  padding: 6px 10px;
  outline: none;
  box-sizing: border-box;
}

/* ══════════════════════════════════════════════════════════════
   HOME PAGE — PREMIUM REDESIGN
══════════════════════════════════════════════════════════════ */
.home-page {
  position: fixed;
  inset: 0;
  top: 36px;
  z-index: 400;
  background: var(--bg);
  display: flex;
  flex-direction: row;
  animation: accountIn .22s ease;
}
.home-page.hidden { display: none; }

/* ── Sidebar ──────────────────────────────────────────────── */
.hs-sidebar {
  width: 252px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  background: var(--sidebar-bg);
  border-right: 1px solid var(--border);
  overflow-y: auto;
  padding: 0 0 0;
  box-sizing: border-box;
}

/* Profile block */
.hs-profile {
  display: flex;
  align-items: center;
  gap: 11px;
  padding: 20px 16px 16px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(123,104,238,.07) 0%, transparent 100%);
  flex-shrink: 0;
}
.hs-avatar {
  width: 42px;
  height: 42px;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(123,104,238,.25) 0%, rgba(123,104,238,.1) 100%);
  border: 1.5px solid var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: 800;
  color: var(--accent);
  flex-shrink: 0;
  box-shadow: 0 0 0 3px rgba(123,104,238,.12);
}
.hs-profile-info { display: flex; flex-direction: column; gap: 2px; min-width: 0; }
.hs-name {
  font-size: 13px;
  font-weight: 700;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.hs-since { font-size: 11px; color: var(--text-muted); }

/* Nav */
.hs-nav {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 14px 10px 0;
  gap: 1px;
}
.hs-nav p.hs-nav-label {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .10em;
  color: var(--text-muted);
  padding: 8px 10px 5px;
}
.hs-nav-item {
  display: flex;
  align-items: center;
  gap: 9px;
  width: 100%;
  padding: 8px 11px;
  border-radius: 8px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-size: 13px;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
  text-align: left;
  transition: background .15s, color .15s;
}
.hs-nav-item:hover  { background: var(--surface); color: var(--text); }
.hs-nav-item.active { background: var(--accent-dim); color: var(--accent); }

.hs-divider { height: 1px; background: var(--border); margin: 10px 10px; }

/* Sidebar board list */
.hs-board-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 1px;
}
.hs-board-nav {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 7px 11px;
  border-radius: 8px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-size: 13px;
  font-family: inherit;
  cursor: pointer;
  text-align: left;
  transition: background .15s, color .15s;
}
.hs-board-nav:hover  { background: var(--surface); color: var(--text); }
.hs-board-nav.active { background: var(--accent-dim); color: var(--accent); }
.hs-board-emoji { font-size: 13px; flex-shrink: 0; }
.hs-board-label {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-weight: 600;
}
.hs-board-count {
  font-size: 11px;
  background: var(--surface2);
  border-radius: 999px;
  padding: 1px 8px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.hs-new-board-btn {
  display: flex;
  align-items: center;
  gap: 7px;
  width: 100%;
  padding: 7px 11px;
  border-radius: 8px;
  border: 1px dashed var(--border-light);
  background: transparent;
  color: var(--text-muted);
  font-size: 12px;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
  text-align: left;
  margin-top: 5px;
  transition: border-color .15s, color .15s, background .15s;
}
.hs-new-board-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: var(--accent-dim);
}

/* Bottom account button */
.hs-bottom {
  border-top: 1px solid var(--border);
  padding: 10px 10px;
  flex-shrink: 0;
  margin-top: auto;
}
.hs-account-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 8px 11px;
  border-radius: 8px;
  border: none;
  background: transparent;
  cursor: pointer;
  text-align: left;
  transition: background .15s;
}
.hs-account-btn:hover { background: var(--surface); }
.hs-account-avatar {
  width: 30px;
  height: 30px;
  border-radius: 8px;
  background: var(--accent-dim);
  border: 1.5px solid var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 800;
  color: var(--accent);
  flex-shrink: 0;
}
.hs-account-name { font-size: 12px; font-weight: 600; color: var(--text); }

/* ── Main area ────────────────────────────────────────────── */
.hs-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-width: 0;
}

/* Hero banner */
.hs-hero {
  position: relative;
  padding: 48px 52px 38px;
  flex-shrink: 0;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
  overflow: hidden;
}
/* Subtle dot-grid texture */
.hs-hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: radial-gradient(rgba(255,255,255,.035) 1px, transparent 1px);
  background-size: 22px 22px;
  pointer-events: none;
}
/* Purple aurora glow top-right */
.hs-hero::after {
  content: '';
  position: absolute;
  right: -80px;
  top: -100px;
  width: 560px;
  height: 380px;
  background: radial-gradient(ellipse, rgba(123,104,238,.22) 0%, transparent 65%);
  pointer-events: none;
}
.hs-hero-inner {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 24px;
}
.hs-hero-left { min-width: 0; flex: 1; }
.hs-greeting {
  font-size: 42px;
  font-weight: 800;
  letter-spacing: -.9px;
  line-height: 1.05;
  color: var(--text);
  margin: 0 0 8px;
}
.hs-date {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0 0 6px;
}
.hs-hero-sub {
  font-size: 12px;
  color: var(--text-muted);
  opacity: .75;
  margin: 0;
  font-weight: 500;
}

/* Open Workspace CTA */
.home-enter-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 13px 24px;
  border-radius: 10px;
  background: var(--accent);
  border: none;
  color: #fff;
  font-size: 14px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
  box-shadow: 0 4px 22px rgba(123,104,238,.42);
  transition: opacity .15s, transform .12s, box-shadow .15s;
}
.home-enter-btn:hover  {
  opacity: .92;
  transform: translateY(-2px);
  box-shadow: 0 8px 32px rgba(123,104,238,.55);
}
.home-enter-btn:active { transform: scale(.97); }

/* Scrollable body */
.hs-body {
  flex: 1;
  overflow-y: auto;
  padding: 36px 52px 52px;
  display: flex;
  flex-direction: column;
  gap: 40px;
}

/* ── Stats row ────────────────────────────────────────────── */
.hs-stats-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 14px;
}
.hs-stat {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 22px 22px 18px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
  overflow: hidden;
  cursor: default;
  transition: transform .18s, box-shadow .18s;
}
/* Colored top accent bar per stat */
.hs-stat::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  border-radius: 14px 14px 0 0;
}
.hs-stat:nth-child(1)::before { background: var(--accent); }
.hs-stat:nth-child(2)::before { background: #10b981; }
.hs-stat:nth-child(3)::before { background: var(--warn); }
.hs-stat:nth-child(4)::before { background: #ec4899; }
.hs-stat:hover { transform: translateY(-3px); box-shadow: 0 8px 28px rgba(0,0,0,.3); }
.hs-stat-icon  { font-size: 22px; line-height: 1; }
.hs-stat-val {
  font-size: 34px;
  font-weight: 800;
  line-height: 1;
  font-variant-numeric: tabular-nums;
}
.hs-stat-lbl {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: .08em;
}
/* Per-stat number colors */
.hs-stat:nth-child(1) .hs-stat-val { color: var(--accent); }
.hs-stat:nth-child(2) .hs-stat-val { color: #10b981; }
.hs-stat:nth-child(3) .hs-stat-val { color: var(--warn); }
.hs-stat:nth-child(4) .hs-stat-val { color: #ec4899; }
/* Override if warn class applied */
.hs-stat-warn .hs-stat-val { color: #ef4444 !important; }

/* ── Section headers ──────────────────────────────────────── */
.hs-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}
.hs-section-title {
  font-size: 17px;
  font-weight: 700;
  color: var(--text);
  letter-spacing: -.2px;
  margin: 0;
}
.hs-section-action {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  font-size: 12px;
  font-weight: 700;
  color: var(--accent);
  background: var(--accent-dim);
  border: none;
  cursor: pointer;
  font-family: inherit;
  padding: 5px 14px;
  border-radius: 999px;
  transition: background .15s, color .15s, transform .1s;
}
.hs-section-action:hover  { background: var(--accent); color: #fff; }
.hs-section-action:active { transform: scale(.96); }

/* ── Board grid ───────────────────────────────────────────── */
.home-board-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 16px;
}

/* Board card */
.hb-card {
  position: relative;
  background: var(--surface);
  border: 1px solid var(--border);
  border-top: 3px solid var(--bc, var(--accent));
  border-radius: 14px;
  padding: 24px 22px 20px;
  cursor: pointer;
  transition: transform .18s, box-shadow .18s, border-color .18s;
  display: flex;
  flex-direction: column;
  gap: 10px;
  user-select: none;
}
.hb-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 14px 36px rgba(0,0,0,.32);
  border-color: var(--bc, var(--accent));
}
.hb-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
}
.hb-emoji { font-size: 34px; line-height: 1; }
.hb-count-badge {
  font-size: 11px;
  font-weight: 700;
  background: var(--surface2);
  border-radius: 999px;
  padding: 3px 10px;
  color: var(--text-muted);
  align-self: flex-start;
  margin-top: 4px;
  white-space: nowrap;
}
.hb-del {
  position: absolute;
  top: 12px;
  right: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border-radius: 6px;
  border: none;
  background: var(--surface2);
  color: var(--text-muted);
  font-size: 15px;
  cursor: pointer;
  opacity: 0;
  transition: opacity .15s, background .15s, color .15s;
}
.hb-card:hover .hb-del { opacity: 1; }
.hb-del:hover { background: rgba(255,107,129,.2); color: #ff6b81; }

.hb-name {
  font-size: 15px;
  font-weight: 700;
  color: var(--text);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  letter-spacing: -.1px;
}
.hb-meta { font-size: 12px; color: var(--text-muted); margin: 0; }
.hb-bar {
  height: 4px;
  background: var(--border);
  border-radius: 999px;
  overflow: hidden;
  margin-top: 2px;
}
.hb-bar-fill {
  height: 100%;
  background: var(--bc, var(--accent));
  border-radius: 999px;
  transition: width .5s cubic-bezier(.25,.8,.25,1);
}

/* New board card */
.hb-new {
  border-style: dashed;
  border-top: 1px dashed var(--border);
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  min-height: 150px;
  background: transparent;
}
.hb-new:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: var(--accent-dim);
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(0,0,0,.25);
}
.hb-new-icon  { font-size: 28px; line-height: 1; }
.hb-new-label { font-size: 13px; font-weight: 700; margin: 0; }

/* Inline create form */
.hb-create-form {
  grid-column: 1 / -1;
  background: var(--surface);
  border: 1px solid var(--border);
  border-top: 3px solid var(--accent);
  border-radius: 14px;
  padding: 30px 28px 26px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  max-width: 440px;
}
.hb-cf-title { font-size: 16px; font-weight: 700; color: var(--text); margin: 0; }
.hb-cf-input {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-size: 14px;
  font-family: inherit;
  padding: 11px 14px;
  outline: none;
  transition: border-color .15s;
}
.hb-cf-input:focus { border-color: var(--accent); }
.hb-cf-actions { display: flex; gap: 10px; }
.hb-cf-create {
  padding: 10px 22px;
  border-radius: 8px;
  background: var(--accent);
  border: none;
  color: #fff;
  font-size: 13px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  transition: opacity .15s, transform .1s;
}
.hb-cf-create:hover  { opacity: .88; }
.hb-cf-create:active { transform: scale(.97); }
.hb-cf-cancel {
  padding: 10px 16px;
  border-radius: 8px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-muted);
  font-size: 13px;
  font-family: inherit;
  cursor: pointer;
  transition: border-color .15s, color .15s;
}
.hb-cf-cancel:hover { border-color: var(--border-light); color: var(--text); }

/* ── Recent tasks ─────────────────────────────────────────── */
.hs-recent { display: flex; flex-direction: column; gap: 6px; }
.hs-recent-empty {
  font-size: 13px;
  color: var(--text-muted);
  padding: 36px 0;
  text-align: center;
}
.hs-rt-row {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 13px 18px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-left: 3px solid var(--surface2);
  border-radius: 10px;
  cursor: default;
  transition: border-color .15s, background .15s, transform .12s;
}
.hs-rt-row:hover {
  background: var(--surface2);
  border-color: var(--border-light);
  border-left-color: var(--accent);
  transform: translateX(3px);
}
.hs-rt-row.prio-high   { border-left-color: #ef4444; }
.hs-rt-row.prio-medium { border-left-color: var(--warn); }
.hs-rt-row.prio-low    { border-left-color: var(--accent); }
.hs-rt-dot { display: none; }
.hs-rt-main { flex: 1; display: flex; flex-direction: column; gap: 5px; min-width: 0; }
.hs-rt-text {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.hs-rt-meta { display: flex; align-items: center; gap: 5px; flex-wrap: wrap; }
.hs-rt-board, .hs-rt-prio, .hs-rt-due {
  font-size: 10px;
  font-weight: 700;
  padding: 2px 9px;
  border-radius: 999px;
  background: var(--surface2);
  color: var(--text-muted);
  white-space: nowrap;
  text-transform: uppercase;
  letter-spacing: .05em;
}
.hs-rt-due.overdue { background: rgba(239,68,68,.15); color: #f87171; }
.hs-rt-go {
  width: 30px;
  height: 30px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--surface2);
  color: var(--text-muted);
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  opacity: 0;
  transition: opacity .15s, background .15s, color .15s, border-color .15s;
}
.hs-rt-row:hover .hs-rt-go { opacity: 1; }
.hs-rt-go:hover { background: var(--accent-dim); color: var(--accent); border-color: var(--accent); }

/* ══════════════════════════════════════════════════════════════
   BOARD CARD — team footer
══════════════════════════════════════════════════════════════ */
.hb-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-top: 4px;
}
.hb-members {
  display: flex;
  align-items: center;
}
.hb-member-av {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 2px solid var(--surface);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
  font-weight: 800;
  color: #fff;
  letter-spacing: 0;
  flex-shrink: 0;
  margin-left: -6px;
  transition: transform .15s;
}
.hb-member-av:first-child { margin-left: 0; }
.hb-members:hover .hb-member-av { transform: translateX(-2px); }
.hb-member-extra {
  background: var(--surface3);
  color: var(--text-muted);
  font-size: 8px;
}
.hb-team-btn {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--border-light);
  background: var(--surface2);
  color: var(--text-muted);
  font-size: 11px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  flex-shrink: 0;
  transition: border-color .15s, color .15s, background .15s;
}
.hb-team-btn:hover {
  background: var(--accent-dim);
  border-color: var(--accent);
  color: var(--accent);
}

/* ══════════════════════════════════════════════════════════════
   TEAM MODAL
══════════════════════════════════════════════════════════════ */
.team-modal-overlay {
  position: fixed;
  inset: 0;
  z-index: 900;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  animation: teamOverlayIn .18s ease;
}
.team-modal-overlay.hidden { display: none; }

@keyframes teamOverlayIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.team-modal {
  width: 440px;
  max-width: calc(100vw - 32px);
  background: var(--surface);
  border: 1px solid var(--border-light);
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 32px 80px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.04);
  animation: teamModalIn .22s cubic-bezier(.34,1.4,.64,1);
  display: flex;
  flex-direction: column;
}
@keyframes teamModalIn {
  from { opacity: 0; transform: scale(.93) translateY(10px); }
  to   { opacity: 1; transform: scale(1)   translateY(0); }
}

/* Header */
.team-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 22px 22px 16px;
  background: linear-gradient(135deg, rgba(123,104,238,.12) 0%, transparent 80%);
  border-bottom: 1px solid var(--border);
}
.team-modal-title-row {
  display: flex;
  align-items: center;
  gap: 14px;
}
.team-modal-emoji {
  font-size: 34px;
  line-height: 1;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.3));
}
.team-modal-board-name {
  font-size: 17px;
  font-weight: 800;
  color: var(--text);
  letter-spacing: -.2px;
  margin: 0 0 2px;
}
.team-modal-subtitle {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: .08em;
  margin: 0;
}
.team-modal-close {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: none;
  background: var(--surface2);
  color: var(--text-muted);
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: background .15s, color .15s;
}
.team-modal-close:hover { background: rgba(255,107,129,.15); color: #ff6b81; }

/* Body */
.team-modal-body {
  padding: 18px 22px 8px;
  flex: 1;
  overflow-y: auto;
  max-height: 320px;
}
.team-modal-hint {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 14px;
  line-height: 1.5;
}
.team-members-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.team-empty {
  font-size: 13px;
  color: var(--text-muted);
  text-align: center;
  padding: 24px 0;
}

/* Member row */
.team-member-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: 10px;
  background: var(--surface2);
  border: 1px solid transparent;
  transition: border-color .15s;
}
.team-member-row:hover { border-color: var(--border-light); }
.team-member-row.owner-row { background: rgba(123,104,238,.08); }
.team-member-av {
  width: 38px;
  height: 38px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 800;
  color: #fff;
  flex-shrink: 0;
}
.team-member-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 3px;
  min-width: 0;
}
.team-member-name {
  font-size: 13px;
  font-weight: 700;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.team-member-role {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .08em;
  padding: 2px 8px;
  border-radius: 999px;
  display: inline-block;
  align-self: flex-start;
}
.team-member-role.owner  { background: rgba(123,104,238,.18); color: var(--accent); }
.team-member-role.member { background: var(--surface3); color: var(--text-muted); }
.team-member-remove {
  width: 28px;
  height: 28px;
  border-radius: 7px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  opacity: 0;
  transition: opacity .15s, background .15s, color .15s;
}
.team-member-row:hover .team-member-remove { opacity: 1; }
.team-member-remove:hover { background: rgba(255,107,129,.15); color: #ff6b81; }

/* Footer / invite */
.team-modal-footer {
  padding: 14px 22px 20px;
  border-top: 1px solid var(--border);
  background: var(--sidebar-bg);
}
.team-invite-row {
  display: flex;
  gap: 10px;
}
.team-invite-input {
  flex: 1;
  background: var(--surface2);
  border: 1.5px solid var(--border-light);
  border-radius: 9px;
  color: var(--text);
  font-size: 13px;
  font-family: inherit;
  padding: 10px 14px;
  outline: none;
  transition: border-color .15s, box-shadow .15s;
}
.team-invite-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(123,104,238,.18);
}
.team-invite-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 10px 18px;
  border-radius: 9px;
  border: none;
  background: var(--accent);
  color: #fff;
  font-size: 13px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  flex-shrink: 0;
  transition: opacity .15s, transform .1s;
}
.team-invite-btn:hover  { opacity: .88; }
.team-invite-btn:active { transform: scale(.96); }
.team-invite-err {
  font-size: 11px;
  color: #f87171;
  margin-top: 8px;
}
.team-invite-err.hidden { display: none; }

/* ══════════════════════════════════════════════════════════════
   BACK-TO-HOME BUTTON (workspace sidebar)
══════════════════════════════════════════════════════════════ */
.nav-home-btn {
  display: flex;
  align-items: center;
  gap: 9px;
  width: calc(100% - 16px);
  margin: 10px 8px 0;
  padding: 9px 12px;
  border-radius: 8px;
  border: 1px solid var(--border-light);
  background: var(--surface2);
  color: var(--text-muted);
  font-size: 12px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  text-align: left;
  transition: background .15s, color .15s, border-color .15s, transform .12s;
  flex-shrink: 0;
}
.nav-home-btn svg { flex-shrink: 0; }
.nav-home-btn:hover {
  background: var(--accent-dim);
  border-color: var(--accent);
  color: var(--accent);
  transform: translateX(-2px);
}
.nav-home-btn:active { transform: scale(.97); }

/* ─── Auto-Updater ──────────────────────────────────────────────────────── */

/* Banner */
.update-banner.hidden { display: none; }
.update-modal-overlay.hidden { display: none; }

.update-banner {
  position: fixed;
  top: 38px; /* under titlebar */
  left: 0; right: 0;
  z-index: 9000;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 18px;
  background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
  border-bottom: 1px solid rgba(139,92,246,.4);
  transform: translateY(-100%);
  transition: transform .3s cubic-bezier(.34,1.56,.64,1);
  box-shadow: 0 4px 24px rgba(139,92,246,.25);
}
.update-banner--visible { transform: translateY(0); }
.update-banner-left {
  display: flex;
  align-items: center;
  gap: 10px;
  color: #c4b5fd;
  font-size: .85rem;
  font-weight: 500;
}
.update-banner-left svg { color: #a78bfa; flex-shrink: 0; }
.update-banner-right { display: flex; align-items: center; gap: 8px; }
.update-btn-primary {
  background: rgba(139,92,246,.85);
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 5px 14px;
  font-size: .8rem;
  font-weight: 600;
  cursor: pointer;
  transition: background .15s, transform .1s;
}
.update-btn-primary:hover { background: #7c3aed; transform: translateY(-1px); }
.update-btn-dismiss {
  background: transparent;
  border: none;
  color: #7c6fba;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 4px;
  transition: color .15s, background .15s;
}
.update-btn-dismiss:hover { color: #e2d9f3; background: rgba(255,255,255,.08); }

/* Modal overlay */
.update-modal-overlay {
  position: fixed;
  inset: 0;
  z-index: 9100;
  background: rgba(0,0,0,.65);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity .25s;
}
.update-modal--open { opacity: 1; }

/* Modal box */
.update-modal {
  background: #16131f;
  border: 1px solid rgba(139,92,246,.35);
  border-radius: 16px;
  width: 480px;
  max-width: 92vw;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 24px 80px rgba(0,0,0,.6), 0 0 0 1px rgba(139,92,246,.1);
  transform: scale(.95);
  transition: transform .25s cubic-bezier(.34,1.3,.64,1);
}
.update-modal--open .update-modal { transform: scale(1); }

.update-modal-header {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  padding: 22px 22px 14px;
  border-bottom: 1px solid rgba(255,255,255,.06);
}
.update-modal-icon {
  width: 44px; height: 44px;
  border-radius: 12px;
  background: linear-gradient(135deg, #4f46e5, #7c3aed);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  box-shadow: 0 0 20px rgba(124,58,237,.4);
}
.update-modal-icon svg { color: #fff; }
.update-modal-title {
  font-size: 1rem;
  font-weight: 700;
  color: #e2d9f3;
  margin: 0 0 4px;
}
.update-modal-version {
  font-size: .8rem;
  color: #a78bfa;
  margin: 0;
  font-weight: 500;
}
.update-modal-close {
  margin-left: auto;
  background: transparent;
  border: none;
  color: #6b6483;
  font-size: 1.3rem;
  cursor: pointer;
  padding: 0 4px;
  border-radius: 4px;
  line-height: 1;
  transition: color .15s, background .15s;
  align-self: flex-start;
}
.update-modal-close:hover { color: #e2d9f3; background: rgba(255,255,255,.07); }

.update-modal-notes-label {
  padding: 12px 22px 4px;
  font-size: .72rem;
  font-weight: 700;
  color: #6b6483;
  letter-spacing: .08em;
  text-transform: uppercase;
}
.update-modal-notes {
  flex: 1;
  overflow-y: auto;
  padding: 0 22px 16px;
  font-size: .85rem;
  color: #b8aed4;
  line-height: 1.7;
}
.update-modal-notes h3 { color: #e2d9f3; font-size: .9rem; margin: 12px 0 6px; }
.update-modal-notes h4 { color: #c4b5fd; font-size: .85rem; margin: 10px 0 4px; }
.update-modal-notes ul { padding-left: 18px; margin: 6px 0; }
.update-modal-notes li { margin-bottom: 4px; }
.update-modal-notes p  { margin: 4px 0; }
.update-modal-notes .rn-block { border-left: 3px solid rgba(139,92,246,.4); padding-left: 12px; margin-bottom: 12px; }

/* Progress bar */
.update-progress-wrap {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 0 22px 14px;
}
.update-progress-bar {
  flex: 1;
  height: 6px;
  background: rgba(255,255,255,.06);
  border-radius: 99px;
  overflow: hidden;
}
.update-progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #6d28d9, #8b5cf6);
  border-radius: 99px;
  transition: width .3s ease;
}
.update-progress-pct {
  font-size: .75rem;
  color: #a78bfa;
  font-weight: 600;
  min-width: 34px;
  text-align: right;
}

/* Action buttons */
.update-modal-actions {
  display: flex;
  gap: 10px;
  padding: 12px 22px 20px;
  border-top: 1px solid rgba(255,255,255,.06);
}
.update-action-later {
  flex: 1;
  padding: 10px;
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 8px;
  color: #8b7faa;
  font-size: .85rem;
  font-weight: 500;
  cursor: pointer;
  transition: background .15s, color .15s;
}
.update-action-later:hover { background: rgba(255,255,255,.09); color: #c4b5fd; }
.update-action-install {
  flex: 2;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 18px;
  background: linear-gradient(135deg, #5b21b6, #7c3aed);
  border: none;
  border-radius: 8px;
  color: #fff;
  font-size: .85rem;
  font-weight: 600;
  cursor: pointer;
  transition: opacity .15s, transform .1s, box-shadow .15s;
  box-shadow: 0 4px 16px rgba(124,58,237,.35);
}
.update-action-install:hover:not(:disabled) {
  opacity: .92;
  transform: translateY(-1px);
  box-shadow: 0 6px 20px rgba(124,58,237,.5);
}
.update-action-install:disabled { opacity: .5; cursor: not-allowed; }
.update-action-restart {
  background: linear-gradient(135deg, #065f46, #059669);
  box-shadow: 0 4px 16px rgba(5,150,105,.35);
}
.update-action-restart:hover:not(:disabled) {
  box-shadow: 0 6px 20px rgba(5,150,105,.5);
}
